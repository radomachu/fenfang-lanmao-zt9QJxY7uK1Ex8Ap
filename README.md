[合集 - manim(99)](https://github.com)

[1.manim边学边做--三维图形的场景类03-16](https://github.com/wang_yb/p/18774585)[2.【manim动画教程】-- 安装2023-03-28](https://github.com/wang_yb/p/17264724.html)[3.【manim动画教程】-- 基本图形2023-03-29](https://github.com/wang_yb/p/17269340.html)[4.【manim动画教程】-- 坐标系2023-04-10](https://github.com/wang_yb/p/17301528.html)[5.【manim动画教程】-- 文本样式2023-04-07](https://github.com/wang_yb/p/17294918.html)[6.【manim动画教程】-- 文字和公式2023-04-04](https://github.com/wang_yb/p/17285467.html)[7.【manim动画教程】-- 图形样式2023-03-31](https://github.com/wang_yb/p/17275154.html)[8.【manim动画教程】--相机2023-04-19](https://github.com/wang_yb/p/17334029.html)[9.【manim动画教程】--高级动画效果2023-04-14](https://github.com/wang_yb/p/17317576.html)[10.【manim动画教程】--常用动画效果2023-04-12](https://github.com/wang_yb/p/17309865.html)[11.【manim】之滚动字幕2022-12-06](https://github.com/wang_yb/p/16955924.html)[12.【manim】之圆规动画2023-01-31](https://github.com/wang_yb/p/17079903.html)[13.【manim】之目录动画2023-02-28](https://github.com/wang_yb/p/17163051.html)[14.manim边学边做--DecimalNumber2024-06-12](https://github.com/wang_yb/p/18243662)[15.manim边学边做--Integer2024-06-13](https://github.com/wang_yb/p/18245670)[16.manim边学边做--Variable2024-06-14](https://github.com/wang_yb/p/18248823)[17.manim边学边做--Title2024-06-20](https://github.com/wang_yb/p/18258229)[18.manim边学边做--BulletedList2024-06-21](https://github.com/wang_yb/p/18261017)[19.manim边学边做--SingleStringMathTex2024-06-23](https://github.com/wang_yb/p/18264154)[20.manim边学边做--MathTex2024-06-28](https://github.com/wang_yb/p/18272507)[21.manim边学边做--Tex2024-07-01](https://github.com/wang_yb/p/18278554)[22.manim边学边做--Text2024-07-04](https://github.com/wang_yb/p/18284013)[23.manim边学边做--Paragraph2024-07-09](https://github.com/wang_yb/p/18291657)[24.manim边学边做--MarkupText2024-07-10](https://github.com/wang_yb/p/18294000)[25.manim边学边做--Code2024-07-16](https://github.com/wang_yb/p/18304450)[26.manim边学边做--Matrix2024-07-17](https://github.com/wang_yb/p/18307871)[27.manim边学边做--Table2024-07-25](https://github.com/wang_yb/p/18322456)[28.manim边学边做--点2024-08-09](https://github.com/wang_yb/p/18351279)[29.manim边学边做--圆形类2024-08-15](https://github.com/wang_yb/p/18361469)[30.manim边学边做--圆弧形2024-08-20](https://github.com/wang_yb/p/18368851)[31.manim边学边做--直线类2024-08-22](https://github.com/wang_yb/p/18374417)[32.manim边学边做--带箭头直线2024-09-02](https://github.com/wang_yb/p/18392446)[33.manim边学边做--曲线类2024-09-04](https://github.com/wang_yb/p/18396028)[34.manim边学边做--角度标记2024-09-07](https://github.com/wang_yb/p/18401449)[35.manim边学边做--常用多边形2024-09-10](https://github.com/wang_yb/p/18406455)[36.manim边学边做--通用多边形2024-09-13](https://github.com/wang_yb/p/18411587)[37.manim边学边做--弧形多边形2024-09-15](https://github.com/wang_yb/p/18415355)[38.manim边学边做--空心多边形2024-09-21](https://github.com/wang_yb/p/18423746)[39.manim边学边做--图形间集合关系2024-09-27](https://github.com/wang_yb/p/18435447)[40.manim边学边做--形状匹配2024-10-01](https://github.com/wang_yb/p/18443032)[41.manim边学边做--无向图2024-10-10](https://github.com/wang_yb/p/18456015)[42.manim边做边学--有向图2024-10-12](https://github.com/wang_yb/p/18459887)[43.manim边做边学--数轴2024-10-16](https://github.com/wang_yb/p/18469604)[44.manim边做边学--直角平面2024-10-20](https://github.com/wang_yb/p/18486929)[45.manim边做边学--复数平面2024-10-23](https://github.com/wang_yb/p/18494562)[46.manim边学边做--极坐标平面2024-10-24](https://github.com/wang_yb/p/18498792)[47.manim边学边做--通用二维坐标系2024-10-30](https://github.com/wang_yb/p/18515637)[48.manim边做边学--通用三维坐标系2024-11-01](https://github.com/wang_yb/p/18521033)[49.manim边学边做--三维的点和线2024-11-06](https://github.com/wang_yb/p/18529290):[wgetcloud全球加速器服务](https://wgetcloud6.org)[50.manim边学边做--立方体和棱柱体2024-11-12](https://github.com/wang_yb/p/18541513)[51.manim边做边学--圆锥2024-11-15](https://github.com/wang_yb/p/18547304)[52.manim边做边学--球体2024-11-18](https://github.com/wang_yb/p/18552084)[53.manim边做边学--圆环面2024-11-21](https://github.com/wang_yb/p/18560991)[54.manim边做边学--圆柱体2024-11-27](https://github.com/wang_yb/p/18573159)[55.manim边做边学--曲面2024-12-02](https://github.com/wang_yb/p/18582943)[56.manim边做边学--多面体2024-12-05](https://github.com/wang_yb/p/18588981)[57.manim边做边学--文字的创建与销毁2024-12-09](https://github.com/wang_yb/p/18594671)[58.manim边做边学--图形的创建与销毁2024-12-11](https://github.com/wang_yb/p/18599230)[59.manim边做边学--淡入淡出2024-12-13](https://github.com/wang_yb/p/18604739)[60.manim边学边做--渐变生长2024-12-17](https://github.com/wang_yb/p/18611481)[61.manim边学边做--突出显示2024-12-18](https://github.com/wang_yb/p/18615301)[62.manim边学边做--旋转2024-12-20](https://github.com/wang_yb/p/18619076)[63.manim边学边做--移动动画2024-12-23](https://github.com/wang_yb/p/18623731)[64.manim边学边做--同伦变换2024-12-25](https://github.com/wang_yb/p/18629168)[65.manim边学边做--改变动画速度2024-12-30](https://github.com/wang_yb/p/18640752)[66.manim边做边学--动画轨迹01-02](https://github.com/wang_yb/p/18647897)[67.manim边做边学--动画组合01-07](https://github.com/wang_yb/p/18657572)[68.manim边做边学--动画更新01-10](https://github.com/wang_yb/p/18663675)[69.manim边做边学--动画联动01-14](https://github.com/wang_yb/p/18670246)[70.manim边做边学--缩放变换01-16](https://github.com/wang_yb/p/18674709)[71.manim边做边学--交替变换01-20](https://github.com/wang_yb/p/18681770)[72.manim边做边学--淡入淡出变换01-22](https://github.com/wang_yb/p/18685569)[73.manim边学边做--时针方向变换01-27](https://github.com/wang_yb/p/18692631)[74.manim边学边做--局部变换02-04](https://github.com/wang_yb/p/18697995)[75.manim边学边做--通用变换02-10](https://github.com/wang_yb/p/18707646)[76.manim边学边做--相机Camera简介02-24](https://github.com/wang_yb/p/18735144)[77.manim边学边做--标准相机02-25](https://github.com/wang_yb/p/18736072)[78.manim边学边做--场景Scene简介03-04](https://github.com/wang_yb/p/18750307)[79.manim边学边做--局部缩放的场景类03-07](https://github.com/wang_yb/p/18758176)[80.manim边学边做--向量相关的场景类03-08](https://github.com/wang_yb/p/18759476)[81.manim边学边做--线性变换的场景类03-10](https://github.com/wang_yb/p/18762039)[82.manim边学边做--移动相机的场景类03-14](https://github.com/wang_yb/p/18772416)[83.Manim实现线条发光效果05-17](https://github.com/wang_yb/p/18880993)[84.Manim：动画制作背后的魔法05-18](https://github.com/wang_yb/p/18881943)[85.manim 动画效果总结05-20](https://github.com/wang_yb/p/18886791)[86.manim变换效果总结05-21](https://github.com/wang_yb/p/18888687)[87.Manim动画渲染：从代码到屏幕的幕后故事05-22](https://github.com/wang_yb/p/18890142)[88.轻松掌握Manim的.animate语法：让动画编程更简单05-25](https://github.com/wang_yb/p/18895359)[89.Manim实现图像变形特效05-29](https://github.com/wang_yb/p/18901822)[90.Manim实现旋转变色特效05-30](https://github.com/wang_yb/p/18903581)[91.manim边做边学--显函数图像06-01](https://github.com/wang_yb/p/18905882)[92.manim边做边学--隐函数图像06-02](https://github.com/wang_yb/p/18907370)[93.manim边做边学--参数化曲线06-04](https://github.com/wang_yb/p/18909497)[94.Manim中三种函数图像类的比较06-05](https://github.com/wang_yb/p/18912045)[95.掌握ChangeSpeed类：让数学动画速度随心而动！06-15](https://github.com/wang_yb/p/18929737)[96.把数学对象画出来：Manim Mobject类库速查手册08-16](https://github.com/wang_yb/p/19042599)[97.Manim实现脉冲闪烁特效09-17](https://github.com/wang_yb/p/19097898)[98.Manim实现闪光轨迹特效09-18](https://github.com/wang_yb/p/19099538)

99.Manim实现水波纹特效09-21

收起

本文将介绍如何使用`ManimCE`框架实现一个水波纹特效，让你的数学动画更加生动有趣。

# 1. 实现原理

水波纹特效通过`WaterRipple`类实现，这是一个自定义的`Animation`子类。让我们从代码角度来分析其实现原理：

## 1.1. 核心数据结构

```
class WaterRipple(Animation):
    def __init__(
        self, mobject, scene=None, num_ripples=5, max_outer_radius=3,
        min_inner_radius=1, run_time=2, wave_speed=1.0,
        color=BLUE, fade_out=True, **kwargs
    ):
        # 初始化参数设置
        self.num_ripples = num_ripples
        self.max_outer_radius = max_outer_radius
        self.min_inner_radius = min_inner_radius
        self.wave_speed = wave_speed
        self.color = color
        self.fade_out = fade_out
        self.ripples = []
        self.mobject = mobject
        self.scene = scene
        
        # 颜色处理逻辑
        self.color_list = color if isinstance(color, list) else [color] * num_ripples
        if len(self.color_list) < num_ripples:
            self.color_list = self.color_list * (
                num_ripples // len(self.color_list) + 1
            )
            self.color_list = self.color_list[:num_ripples]
        
        # 创建波纹对象
        for i in range(num_ripples):
            c = Annulus(
                inner_radius=0, outer_radius=0,
                color=self.color_list[i], stroke_width=2, fill_opacity=0,
            )
            c.move_to(mobject.get_center())
            self.ripples.append(c)
        
        # 将波纹添加到场景
        if self.scene is not None:
            for ripple in self.ripples:
                self.scene.add(ripple)
        
        super().__init__(mobject, run_time=run_time, **kwargs)
```

从代码中可以看出，`WaterRipple`类采用了以下核心设计：

1. **波纹数据结构**：使用`Annulus`（圆环）作为基本波纹单元，通过`self.ripples`列表存储多个波纹对象
2. **颜色处理**：支持单一颜色或渐变色列表，自动处理颜色不足时的循环使用
3. **场景集成**：提供可选的`scene`参数，方便将波纹直接添加到场景中

## 1.2. 动画插值算法

动画的核心在于`interpolate_mobject`方法，它定义了动画如何随时间变化：

```
def interpolate_mobject(self, alpha: float) -> None:
    # 计算每个波纹的半径和透明度
    for i in range(self.num_ripples):
        # 每个波纹有不同的相位偏移
        phase_offset = i * (np.pi / self.num_ripples)

        # 使用正弦函数计算半径和透明度，实现波动效果
        time_progress = (alpha + phase_offset * 0.2) % 1
        radius = self.max_outer_radius * time_progress

        if self.fade_out:
            # 透明度随半径增大而减小，使用正弦函数使淡出更自然
            opacity = max(0, np.sin(time_progress * np.pi))
        else:
            opacity = 1

        # 应用变换，使用对应的颜色
        new_c = Annulus(
            inner_radius=self.min_inner_radius,
            outer_radius=radius,
            color=self.color_list[i],
            stroke_width=2,
            fill_opacity=opacity,
        )
        new_c.move_to(self.mobject.get_center())
        self.ripples[i].become(new_c)
```

这里的关键技术点包括：

1. **相位偏移**：通过为每个波纹分配不同的相位偏移，创造出波纹依次扩散的视觉效果
2. **正弦函数插值**：使用正弦函数控制透明度变化，实现更自然的淡出效果
3. **动态更新**：在每一帧都创建新的`Annulus`对象并通过`become()`方法更新波纹的状态

## 1.3. 资源清理机制

动画结束后，需要清理创建的波纹对象：

```
def clean_up_from_scene(self, scene: Scene) -> None:
    # 动画结束后清理波纹
    for ripple in self.ripples:
        if ripple in scene.mobjects:
            scene.remove(ripple)
    super().clean_up_from_scene(scene)
```

这个方法确保动画结束后不会在场景中留下多余的对象，保持场景的整洁。

# 2. 使用示例

下面通过一个完整的示例场景来展示如何使用水波纹特效：

## 2.1. 单个水波纹效果

```
# 示例场景：单个水波纹效果
class Example01(Scene):
    def construct(self):
        # 创建中心点
        center_point = ORIGIN
        center_dot = Dot(center_point, color=BLUE, radius=0.1)
        self.play(FadeIn(center_dot))
        self.wait()

        # 应用水波纹动画，使用渐变色效果
        # 创建颜色渐变列表，从蓝色到紫色再到红色
        gradient_colors = [BLUE, TEAL, GREEN, YELLOW, RED]

        self.play(
            WaterRipple(
                center_dot,
                scene=self,
                num_ripples=5,
                max_outer_radius=2,
                run_time=4,
                wave_speed=1.2,
                color=gradient_colors,  # 使用渐变色列表
                fade_out=True,
                stroke_width=1,
            )
        )
        self.wait(2)
```

![](https://img2024.cnblogs.com/blog/83005/202509/83005-20250921101835286-1151451934.gif)

## 2.2. 使用步骤详解

1. **准备工作**：首先导入必要的库

```
from manim import *
import numpy as np
```

2. **创建中心点**：水波纹效果需要一个中心点作为扩散起点

```
center_point = ORIGIN
center_dot = Dot(center_point, color=BLUE, radius=0.1)
self.play(FadeIn(center_dot))
```

3. **定义颜色方案**：可以使用渐变色列表增强视觉效果

```
gradient_colors = [BLUE, TEAL, GREEN, YELLOW, RED]
```

4. **应用水波纹动画**：配置各项参数并播放动画
   * `center_dot`：波纹中心点对象
   * `scene=self`：当前场景引用
   * `num_ripples=5`：波纹数量
   * `max_outer_radius=2`：最大半径
   * `run_time=4`：动画运行时间
   * `wave_speed=1.2`：波纹传播速度
   * `color=gradient_colors`：使用渐变色列表
   * `fade_out=True`：启用淡出效果

## 2.3. 自定义参数调整

根据实际需求，可以调整以下关键参数以获得不同的视觉效果：

* `num_ripples`：控制波纹数量，更多的波纹会使效果更密集
* `max_outer_radius`：控制波纹扩散范围
* `min_inner_radius`：控制波纹的最小内半径
* `run_time`：控制动画持续时间
* `wave_speed`：控制波纹传播速度
* `color`：可以是单一颜色或渐变色列表
* `fade_out`：是否启用淡出效果

# 3. 总结

## 3.1. 特效特点

1. **视觉效果丰富**：支持单一颜色和渐变色，可创建多种视觉风格
2. **高度可定制**：提供多个参数调整波纹数量、大小、速度和颜色
3. **实现简洁**：基于Manim的Animation类扩展，代码结构清晰易懂
4. **资源管理完善**：包含清理机制，避免场景对象堆积

## 3.2. 使用场景

水波纹特效在以下场景中特别适用：

1. **几何演示**：用于展示圆的概念、扩散过程等几何知识
2. **受力分析**：模拟波的传播，展示力学中的波动现象
3. **交互反馈**：作为点击或其他交互操作的视觉反馈
4. **强调重点**：用于强调画面中的特定元素或区域
5. **过渡效果**：作为场景切换或元素出现/消失的过渡动画

通过这个简单但功能强大的水波纹特效，可以为你的数学动画增添更多视觉吸引力和专业感。无论是教学演示、科学解释还是艺术创作，都能发挥重要作用。
